# Сочетания клавиш в оболочке IPython
Если вы проводите много времени за компьютером, вы наверняка нашли применение сочетаниям клавиш в своем рабочем процессе.
Наиболее знакомыми, пожалуй, являются Cmd-c и Cmd-v (или Ctrl-c и Ctrl-v), используемые для копирования и вставки в самых разных программах и системах.
Опытные пользователи, как правило, идут еще дальше: популярные текстовые редакторы, такие как Emacs, Vim и другие, предоставляют пользователям невероятный набор операций с помощью сложных комбинаций нажатий клавиш.
Оболочка IPython не заходит так далеко, но предоставляет ряд сочетаний клавиш для быстрой навигации при вводе команд.
Хотя некоторые из этих сочетаний клавиш работают в браузерных блокнотах, этот раздел в основном посвящен сочетаниям клавиш в оболочке IPython.
Как только вы к ним привыкнете, они могут оказаться очень полезными для быстрого выполнения определенных команд, не отрывая рук от «домашнего» положения клавиатуры.
Если вы являетесь пользователем Emacs или у вас есть опыт работы с оболочками в стиле Linux, то следующее будет вам очень знакомо.
Я сгруппирую эти сочетания клавиш в несколько категорий: *сочетания клавиш навигации*, *сочетания клавиш ввода текста*, *сочетания клавиш истории команд* и *разные сочетания клавиш*.
## Сочетания клавиш навигации
Хотя использование клавиш со стрелками влево и вправо для перемещения вперед и назад по строке вполне очевидно, есть и другие варианты, которые не требуют перемещения рук из «домашнего» положения клавиатуры:

| Нажатие клавиши | Действие |
|---------------------------------|-----------------------------------|
| Ctrl-a | Переместить курсор в начало строки |
| Ctrl-e | Переместить курсор в конец строки |
| Ctrl-b или клавиша со стрелкой влево | Переместить курсор на один символ назад |
| Ctrl-f или клавиша со стрелкой вправо | Переместить курсор вперед на один символ |
## Сочетания клавиш для ввода текста
Хотя все знакомы с использованием клавиши Backspace для удаления предыдущего символа, чтобы дотянуться до этой клавиши, часто требуется некоторая небольшая гимнастика для пальцев, и она удаляет только один символ за раз.
В IPython есть несколько сочетаний клавиш для удаления части вводимого текста; наиболее полезными из них являются команды для удаления целых строк текста.
Вы поймете, что это стало для вас привычным, если обнаружите, что используете комбинацию Ctrl-b и Ctrl-d вместо того, чтобы нажать Backspace, чтобы удалить предыдущий символ!

| Нажатие клавиши | Действие |
|-------------|------------------- -------------------------------|
| Клавиша Backspace | Удалить предыдущий символ в строке |
| Ctrl-d | Удалить следующий символ в строке |
| Ctrl-k | Вырезать текст от курсора до конца строки |
| Ctrl-u | Вырезать текст от начала строки до курсора |
| Ctrl-y | Сохранить (т.е. вставить) текст, который был ранее вырезан |
| Ctrl-t | Переставить (т.е. поменять местами) два предыдущих символа |
## Сочетания клавиш истории команд
Пожалуй, наиболее эффективными из обсуждаемых здесь сочетаний клавиш являются те, которые IPython предоставляет для навигации по истории команд.
Эта история команд выходит за рамки текущего сеанса IPython: вся история ваших команд хранится в базе данных SQLite в каталоге вашего профиля IPython.
Самый простой способ доступа к предыдущим командам — использовать клавиши со стрелками вверх и вниз для перемещения по истории, но существуют и другие варианты:

| Нажатие клавиши | Действие |
|-----------------------------------|------------- -------------------------------|
| Ctrl-p (или клавиша со стрелкой вверх) | Доступ к предыдущей команде в истории |
| Ctrl-n (или клавиша со стрелкой вниз) | Доступ к следующей команде в истории |
| Ctrl-r | Обратный поиск по истории команд |
Особенно полезной может оказаться опция обратного поиска.
Напомним, что ранее мы определили функцию под названием `square`.
Давайте выполним обратный поиск по нашей истории Python из новой оболочки IPython и снова найдем это определение.
При нажатии Ctrl-r в терминале IPython вы увидите следующее приглашение:
```ipython
В [1]:
(обратный-i-поиск)`':
```
Если вы начнете вводить символы в этом приглашении, IPython автоматически заполнит последнюю команду (если таковая имеется), которая соответствует этим символам:
```ipython
В [1]:
(обратный-поиск) `sqa': квадрат??
```
В любой момент вы можете добавить больше символов, чтобы уточнить поиск, или нажать Ctrl-r еще раз, чтобы продолжить поиск другой команды, которая соответствует запросу. Если вы следовали ранее, нажатие Ctrl-r еще дважды дает:
```ipython
В [1]:
(обратный-i-поиск)`sqa': def square(a):
    """Вернуть квадрат числа"""
    вернуть ** 2
```
Найдя нужную команду, нажмите клавишу Return, и поиск будет завершен.
Затем вы можете использовать полученную команду и продолжить сеанс:
```ipython
В [1]: определение квадрата(а):
    """Вернуть квадрат числа"""
    вернуть ** 2
В [2]: квадрат(2)
Вышло[2]: 4
```
Обратите внимание, что вы можете использовать сочетание клавиш Ctrl-p/Ctrl-n или клавиши со стрелками вверх/вниз для поиска по истории аналогичным образом, но только путем сопоставления символов в начале строки.
То есть, если вы введете **`def`**, а затем нажмете Ctrl-p, будет найдена самая последняя команда (если таковая имеется) в вашей истории, которая начинается с символов `def`.
## Различные сочетания клавиш
Наконец, есть несколько разных сочетаний клавиш, которые не попадают ни в одну из предыдущих категорий, но, тем не менее, их полезно знать:

| Нажатие клавиши | Действие |
|-------------|------------------- -------------------------|
| Ctrl-l | Очистить экран терминала |
| Ctrl-c | Прервать текущую команду Python |
| Ctrl-d | Выйти из сеанса IPython |
Сочетание клавиш Ctrl-c может быть особенно полезным, когда вы случайно запускаете очень длительную задачу.
Хотя некоторые из обсуждаемых здесь приемов на первый взгляд могут показаться немного непонятными, с практикой они быстро станут автоматическими.
Как только вы разовьете эту мышечную память, я подозреваю, что вы даже захотите, чтобы они были доступны в других контекстах.